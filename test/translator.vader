Execute (test translator#util#padding1):
  let text = 'abc'
  let char = '*'
  let width = 5
  let padding_text = translator#util#padding(text, width, char)
  AssertEqual padding_text,'*abc*'

Execute (test translator#util#padding2):
  let text = 'abc'
  let char = '*'
  let width = 6
  let padding_text = translator#util#padding(text, width, char)
  AssertEqual padding_text,'*abc**'

Execute (test translator#util#safe_trim):
  let text = " abc \n "
  let trim_text = translator#util#safe_trim(text)
  AssertEqual trim_text,'abc'

Execute (test translator#cmdline#parse_args1):
  let cmd = '-w test -e baidu youdao -tl ja -sl en'
  let [argobj,code] = translator#cmdline#parse_args(cmd)
  AssertEqual 'test',argobj.word
  AssertEqual ['baidu', 'youdao'],argobj.engines
  AssertEqual 'ja',argobj.target_lang
  AssertEqual 'en',argobj.source_lang

Execute (test translator#cmdline#parse_args2):
  let cmd = '--word test --engines baidu youdao --target_lang ja --source_lang en'
  let [argobj,code] = translator#cmdline#parse_args(cmd)
  AssertEqual 'test',argobj.word
  AssertEqual ['baidu', 'youdao'],argobj.engines
  AssertEqual 'ja',argobj.target_lang
  AssertEqual 'en',argobj.source_lang

Execute (test translator#cmdline#parse_args3):
  let cmd = '-w test -tl ja'
  let [argobj,code] = translator#cmdline#parse_args(cmd)
  AssertEqual 'test',argobj.word
  AssertEqual ['ciba', 'youdao'],argobj.engines
  AssertEqual 'ja',argobj.target_lang
  AssertEqual 'auto',argobj.source_lang

Execute (test translator#cmdline#parse_args4):
  let cmd = '-w test -e google youdao'
  let [argobj,code] = translator#cmdline#parse_args(cmd)
  AssertEqual 'test',argobj.word
  AssertEqual ['google', 'youdao'],argobj.engines
  AssertEqual 'zh',argobj.target_lang
  AssertEqual 'auto',argobj.source_lang

Execute (test translator#cmdline#parse_args5):
  let cmd = '-w test'
  let [argobj,code] = translator#cmdline#parse_args(cmd)
  AssertEqual 'test',argobj.word
  AssertEqual ['ciba', 'youdao'],argobj.engines
  AssertEqual 'zh',argobj.target_lang
  AssertEqual 'auto',argobj.source_lang

Execute (test translator#ui*):
  " Define functions
  function! FoundFiletypeBufnr(filetype)
    let found_bufnr = -1
    for bufnr in range(1, bufnr('$'))
      if getbufvar(bufnr, '&filetype') ==# a:filetype
        let found_bufnr = bufnr
      endif
    endfor
    return found_bufnr
  endfunction

  " Begin translating
  let translations = {
    \ 'status': 1,
    \ 'results': [
    \   {
    \     'engine': 'ciba',
    \     'paraphrase': '',
    \     'phonetic': 'ˈɪmpɔ:t',
    \     'explain': ['n. 进口，进口商品;输入;重要性;意义;', 'vt. 输入，进口;对…有重大关系;意味着;', 'vi. 具重要性;']
    \     },
    \   {
    \     'engine': 'youdao',
    \     'phonetic': '',
    \     'paraphrase': '进口',
    \     'explain': ['n. 进口，进口货；输入；意思，含义；重要性', 'vt. 输入，进口；含…的意思', 'vi. 输入，进口']
    \   }],
    \ 'text': 'import'
    \ }

  Log "1. default settings"
  call translator#ui#window(translations)
  call translator#ui#try_jump_into()
  AssertEqual 'translator',&filetype
  AssertEqual 1,&wrap
  AssertEqual 3,&conceallevel
  AssertEqual 'NormalFloat:TranslatorNF',&winhl
  Assert FoundFiletypeBufnr('translator_border') > -1
  "close window
  wincmd w
  Assert !exists('s:translator_bufnr')
  Assert !exists('s:border_bufnr')
  Assert FoundFiletypeBufnr('translator_border') == -1

  Log "2. do CursorMoved to close window"
  call translator#ui#window(translations)
  doautocmd CursorMoved
  Assert FoundFiletypeBufnr('translator_border') == -1
  Assert FoundFiletypeBufnr('translator') == -1

  Log "3. let g:translator_window_borderchars = v:null"
  let g:translator_window_borderchars = v:null
  call translator#ui#window(translations)
  call translator#ui#try_jump_into()
  AssertEqual 'translator',&filetype
  AssertEqual 1,&foldcolumn
  AssertEqual 1,&wrap
  AssertEqual 3,&conceallevel
  AssertEqual 'FoldColumn:TranslatorNF',&winhl
  Assert FoundFiletypeBufnr('translator_border') == -1
  "close window
  wincmd w
  Assert !exists('s:translator_bufnr')
  Assert !exists('s:border_bufnr')
  Assert FoundFiletypeBufnr('translator_border') == -1
